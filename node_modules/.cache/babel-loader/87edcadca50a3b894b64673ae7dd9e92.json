{"ast":null,"code":"import _toConsumableArray from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/saif/Desktop/projects/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(){var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],detailproducts:detailProduct,cart:[],modelOpen:false,modelProdcut:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};_this.setProducts=function(){var products=[];storeProducts.forEach(function(item){var update=_objectSpread({},item);products=[].concat(_toConsumableArray(products),[update]);});_this.setState(function(){return{products:products};});};_this.handlegetitem=function(id){var prodcutId=_this.state.products.find(function(item){return item.id===id;});return prodcutId;};_this.handleDetail=function(id){var product=_this.handlegetitem(id);_this.setState(function(){return{detailproducts:product};});};_this.handleaddTocart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var productIndex=tempProducts.indexOf(_this.handlegetitem(id));var product=tempProducts[productIndex];product.count=1;product.inCart=true;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){return _this.handleaddtotal();});};_this.handleopenModel=function(id){var product=_this.handlegetitem(id);_this.setState(function(){return{modelProdcut:product,modelOpen:true};});};_this.hadnlecloseModel=function(){_this.setState({modelOpen:false});};_this.handleincrement=function(id){var tempcart=_toConsumableArray(_this.state.cart);var productfind=tempcart.find(function(item){return item.id===id;});var productindex=tempcart.indexOf(productfind);var product=tempcart[productindex];product.count=product.count+1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempcart)};},function(){_this.handleaddtotal();});};_this.handledecrement=function(id){var temcart=_toConsumableArray(_this.state.cart);var prodcutfind=temcart.find(function(item){return item.id===id;});var prodcutindex=temcart.indexOf(prodcutfind);var product=temcart[prodcutindex];product.count=product.count-1;{product.count===0?_this.handleremoveItem(id):product.total=product.price*product.count;_this.setState(function(){return{cart:_toConsumableArray(temcart)};},function(){_this.handleaddtotal();});}};_this.handleremoveItem=function(id){var tempprodut=_toConsumableArray(_this.state.products);var tempcart=_toConsumableArray(_this.state.cart);tempcart=tempcart.filter(function(item){return item.id!==id;});var index=tempprodut.indexOf(_this.handlegetitem(id));var removeitem=tempprodut[index];removeitem.inCart=false;removeitem.price=0;removeitem.total=0;_this.setState(function(){return{cart:_toConsumableArray(tempcart),products:_toConsumableArray(tempprodut)};},function(){_this.handleaddtotal();});};_this.handleclear=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.handleaddtotal();});};_this.handleaddtotal=function(){var total=0;_this.state.cart.map(function(item){return total+=item.total;});var tax=total*0.1;var parsetex=parseFloat(tax.toFixed(2));var totlaal=total+parsetex;_this.setState({cartSubTotal:total,cartTax:parsetex,cartTotal:totlaal});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,handleaddTocart:this.handleaddTocart,handleopen:this.handleopenModel,handleclose:this.hadnlecloseModel,increment:this.handleincrement,decrement:this.handledecrement,removeItem:this.handleremoveItem,clear:this.handleclear})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["/home/saif/Desktop/projects/store/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","detailproducts","cart","modelOpen","modelProdcut","cartSubTotal","cartTax","cartTotal","setProducts","forEach","item","update","setState","handlegetitem","id","prodcutId","find","handleDetail","product","handleaddTocart","tempProducts","productIndex","indexOf","count","inCart","price","total","handleaddtotal","handleopenModel","hadnlecloseModel","handleincrement","tempcart","productfind","productindex","handledecrement","temcart","prodcutfind","prodcutindex","handleremoveItem","tempprodut","filter","index","removeitem","handleclear","map","tax","parsetex","parseFloat","toFixed","totlaal","handleopen","handleclose","increment","decrement","removeItem","clear","props","children","ProductConsumer","Consumer"],"mappings":"u4BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,aAAR,CAAuBC,aAAvB,KAA2C,QAA3C,CAGA,GAAMC,CAAAA,cAAc,CAAGJ,KAAK,CAACK,aAAN,EAAvB,C,GAEMC,CAAAA,e,+VAEFC,K,CAAQ,CACJC,QAAQ,CAAE,EADN,CAEJC,cAAc,CAAEN,aAFZ,CAGJO,IAAI,CAAE,EAHF,CAIJC,SAAS,CAAE,KAJP,CAKJC,YAAY,CAAET,aALV,CAMJU,YAAY,CAAE,CANV,CAOJC,OAAO,CAAE,CAPL,CAQJC,SAAS,CAAE,CARP,C,OAeRC,W,CAAc,UAAM,CAChB,GAAIR,CAAAA,QAAQ,CAAG,EAAf,CACAN,aAAa,CAACe,OAAd,CAAuB,SAAAC,IAAI,CAAI,CACvB,GAAMC,CAAAA,MAAM,kBAAOD,IAAP,CAAZ,CACAV,QAAQ,8BAAOA,QAAP,GAAiBW,MAAjB,EAAR,CACP,CAHD,EAIA,MAAKC,QAAL,CAAe,UAAM,CACjB,MAAO,CAACZ,QAAQ,CAAEA,QAAX,CAAP,CACH,CAFD,EAGH,C,OAEDa,a,CAAgB,SAAAC,EAAE,CAAI,CAClB,GAAMC,CAAAA,SAAS,CAAG,MAAKhB,KAAL,CAAWC,QAAX,CAAoBgB,IAApB,CAAyB,SAAAN,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAhB,EAA7B,CAAlB,CACA,MAAOC,CAAAA,SAAP,CACH,C,OAEDE,Y,CAAe,SAACH,EAAD,CAAQ,CAEnB,GAAMI,CAAAA,OAAO,CAAG,MAAKL,aAAL,CAAmBC,EAAnB,CAAhB,CACA,MAAKF,QAAL,CAAe,UAAM,CACjB,MAAO,CAACX,cAAc,CAAEiB,OAAjB,CAAP,CACH,CAFD,EAGH,C,OACDC,e,CAAkB,SAACL,EAAD,CAAQ,CACtB,GAAIM,CAAAA,YAAY,oBAAO,MAAKrB,KAAL,CAAWC,QAAlB,CAAhB,CACA,GAAMqB,CAAAA,YAAY,CAAGD,YAAY,CAACE,OAAb,CAAqB,MAAKT,aAAL,CAAmBC,EAAnB,CAArB,CAArB,CACA,GAAMI,CAAAA,OAAO,CAAGE,YAAY,CAACC,YAAD,CAA5B,CACAH,OAAO,CAACK,KAAR,CAAgB,CAAhB,CACAL,OAAO,CAACM,MAAR,CAAiB,IAAjB,CACA,GAAMC,CAAAA,KAAK,CAAGP,OAAO,CAACO,KAAtB,CACAP,OAAO,CAACQ,KAAR,CAAgBD,KAAhB,CACA,MAAKb,QAAL,CAAc,UAAM,CAChB,MAAO,CAAEZ,QAAQ,CAAEoB,YAAZ,CAA0BlB,IAAI,8BAAM,MAAKH,KAAL,CAAWG,IAAjB,GAAuBgB,OAAvB,EAA9B,CAAP,CACH,CAFD,CAEG,iBAAM,OAAKS,cAAL,EAAN,EAFH,EAMH,C,OAEDC,e,CAAkB,SAAAd,EAAE,CAAI,CACpB,GAAMI,CAAAA,OAAO,CAAG,MAAKL,aAAL,CAAmBC,EAAnB,CAAhB,CACA,MAAKF,QAAL,CAAe,UAAM,CACjB,MAAO,CAACR,YAAY,CAAGc,OAAhB,CAAyBf,SAAS,CAAE,IAApC,CAAP,CACH,CAFD,EAGH,C,OAED0B,gB,CAAmB,UAAM,CACrB,MAAKjB,QAAL,CAAc,CAACT,SAAS,CAAC,KAAX,CAAd,EACH,C,OAED2B,e,CAAkB,SAAAhB,EAAE,CAAI,CACpB,GAAIiB,CAAAA,QAAQ,oBAAO,MAAKhC,KAAL,CAAWG,IAAlB,CAAZ,CACA,GAAM8B,CAAAA,WAAW,CAAGD,QAAQ,CAACf,IAAT,CAAc,SAAAN,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAWA,EAAf,EAAlB,CAApB,CACA,GAAMmB,CAAAA,YAAY,CAAGF,QAAQ,CAACT,OAAT,CAAiBU,WAAjB,CAArB,CACA,GAAMd,CAAAA,OAAO,CAAGa,QAAQ,CAACE,YAAD,CAAxB,CAEAf,OAAO,CAACK,KAAR,CAAgBL,OAAO,CAACK,KAAR,CAAgB,CAAhC,CACAL,OAAO,CAACQ,KAAR,CAAgBR,OAAO,CAACK,KAAR,CAAgBL,OAAO,CAACO,KAAxC,CAEA,MAAKb,QAAL,CAAc,UAAM,CAChB,MAAO,CACHV,IAAI,oBAAM6B,QAAN,CADD,CAAP,CAGH,CAJD,CAIG,UAAM,CACL,MAAKJ,cAAL,GACH,CAND,EASH,C,OAEDO,e,CAAkB,SAAApB,EAAE,CAAI,CAEpB,GAAIqB,CAAAA,OAAO,oBAAO,MAAKpC,KAAL,CAAWG,IAAlB,CAAX,CACA,GAAMkC,CAAAA,WAAW,CAAGD,OAAO,CAACnB,IAAR,CAAa,SAAAN,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAWA,EAAf,EAAjB,CAApB,CACA,GAAMuB,CAAAA,YAAY,CAAGF,OAAO,CAACb,OAAR,CAAgBc,WAAhB,CAArB,CACA,GAAMlB,CAAAA,OAAO,CAAGiB,OAAO,CAACE,YAAD,CAAvB,CACAnB,OAAO,CAACK,KAAR,CAAgBL,OAAO,CAACK,KAAR,CAAgB,CAAhC,CAEA,CAACL,OAAO,CAACK,KAAR,GAAkB,CAAlB,CAAsB,MAAKe,gBAAL,CAAsBxB,EAAtB,CAAtB,CAEGI,OAAO,CAACQ,KAAR,CAAgBR,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACK,KAF3C,CAIG,MAAKX,QAAL,CAAe,UAAM,CACjB,MAAO,CACHV,IAAI,oBAAOiC,OAAP,CADD,CAAP,CAGH,CAJD,CAIE,UAAM,CACJ,MAAKR,cAAL,GACH,CAND,EAQH,CAGJ,C,OAEDW,gB,CAAmB,SAAAxB,EAAE,CAAI,CACrB,GAAIyB,CAAAA,UAAU,oBAAO,MAAKxC,KAAL,CAAWC,QAAlB,CAAd,CACA,GAAI+B,CAAAA,QAAQ,oBAAO,MAAKhC,KAAL,CAAWG,IAAlB,CAAZ,CAEA6B,QAAQ,CAAGA,QAAQ,CAACS,MAAT,CAAgB,SAAA9B,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAhB,EAApB,CAAX,CAEA,GAAM2B,CAAAA,KAAK,CAAGF,UAAU,CAACjB,OAAX,CAAmB,MAAKT,aAAL,CAAmBC,EAAnB,CAAnB,CAAd,CAEA,GAAI4B,CAAAA,UAAU,CAAGH,UAAU,CAACE,KAAD,CAA3B,CACAC,UAAU,CAAClB,MAAX,CAAoB,KAApB,CACAkB,UAAU,CAACjB,KAAX,CAAmB,CAAnB,CACAiB,UAAU,CAAChB,KAAX,CAAmB,CAAnB,CAEA,MAAKd,QAAL,CAAc,UAAM,CAChB,MAAO,CACHV,IAAI,oBAAM6B,QAAN,CADD,CAEH/B,QAAQ,oBAAMuC,UAAN,CAFL,CAAP,CAKH,CAND,CAMG,UAAM,CACL,MAAKZ,cAAL,GACH,CARD,EAUH,C,OAEDgB,W,CAAc,UAAM,CAGhB,MAAK/B,QAAL,CAAc,UAAM,CAChB,MAAO,CAACV,IAAI,CAAE,EAAP,CAAP,CACH,CAFD,CAEG,UAAM,CACL,MAAKM,WAAL,GACA,MAAKmB,cAAL,GACH,CALD,EAMH,C,OAEDA,c,CAAiB,UAAM,CACnB,GAAID,CAAAA,KAAK,CAAG,CAAZ,CACA,MAAK3B,KAAL,CAAWG,IAAX,CAAgB0C,GAAhB,CAAoB,SAAAlC,IAAI,QAAIgB,CAAAA,KAAK,EAAIhB,IAAI,CAACgB,KAAlB,EAAxB,EACA,GAAMmB,CAAAA,GAAG,CAAGnB,KAAK,CAAG,GAApB,CACA,GAAMoB,CAAAA,QAAQ,CAAGC,UAAU,CAACF,GAAG,CAACG,OAAJ,CAAY,CAAZ,CAAD,CAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGvB,KAAK,CAAGoB,QAAxB,CAEA,MAAKlC,QAAL,CAAc,CAAEP,YAAY,CAAEqB,KAAhB,CAAuBpB,OAAO,CAAEwC,QAAhC,CAA0CvC,SAAS,CAAE0C,OAArD,CAAd,EAEH,C,wGAhJmB,CAChB,KAAKzC,WAAL,GACH,C,uCAiJQ,CACL,mBAEI,oBAAC,cAAD,CAAgB,QAAhB,EAAyB,KAAK,gCACvB,KAAKT,KADkB,MAE1BkB,YAAY,CAAE,KAAKA,YAFO,CAG1BE,eAAe,CAAE,KAAKA,eAHI,CAI1B+B,UAAU,CAAG,KAAKtB,eAJQ,CAK1BuB,WAAW,CAAG,KAAKtB,gBALO,CAM1BuB,SAAS,CAAG,KAAKtB,eANS,CAO1BuB,SAAS,CAAG,KAAKnB,eAPS,CAQ1BoB,UAAU,CAAG,KAAKhB,gBARQ,CAS1BiB,KAAK,CAAG,KAAKZ,WATa,EAA9B,EAYK,KAAKa,KAAL,CAAWC,QAZhB,CAFJ,CAkBH,C,6BAnLyBhE,S,EAsL9B,GAAMiE,CAAAA,eAAe,CAAG9D,cAAc,CAAC+D,QAAvC,CAEA,OAAS7D,eAAT,CAA0B4D,eAA1B","sourcesContent":["import React, {Component} from 'react'\nimport {storeProducts, detailProduct} from './data'\n\n\nconst ProductContext = React.createContext()\n\nclass ProductProvider extends Component {\n\n    state = {\n        products: [],\n        detailproducts: detailProduct,\n        cart :[],\n        modelOpen: false,\n        modelProdcut: detailProduct,\n        cartSubTotal: 0,\n        cartTax: 0,\n        cartTotal: 0\n    };\n\n    componentDidMount() {\n        this.setProducts()\n    }\n\n    setProducts = () => {\n        let products = []\n        storeProducts.forEach( item => {\n                const update = {...item}\n                products = [...products, update ]\n        } );\n        this.setState( () => {\n            return {products: products}\n        } )\n    }\n\n    handlegetitem = id => {\n        const prodcutId = this.state.products.find(item => item.id === id);\n        return prodcutId\n    }\n\n    handleDetail = (id) => {\n       \n        const product = this.handlegetitem(id)\n        this.setState( () => {\n            return {detailproducts: product}\n        })\n    }\n    handleaddTocart = (id) => {\n        let tempProducts = [...this.state.products]\n        const productIndex = tempProducts.indexOf(this.handlegetitem(id));\n        const product = tempProducts[productIndex]\n        product.count = 1;\n        product.inCart = true\n        const price = product.price;\n        product.total = price\n        this.setState(() => {\n            return { products: tempProducts, cart: [...this.state.cart, product] }\n        }, () => this.handleaddtotal())\n\n        \n       \n    }\n\n    handleopenModel = id => {\n        const product = this.handlegetitem(id)\n        this.setState( () => {\n            return {modelProdcut : product, modelOpen: true}\n        })\n    }\n\n    hadnlecloseModel = () => {\n        this.setState({modelOpen:false})\n    }\n\n    handleincrement = id => {\n        let tempcart = [...this.state.cart];\n        const productfind = tempcart.find(item => item.id ===id)\n        const productindex = tempcart.indexOf(productfind)\n        const product = tempcart[productindex]\n\n        product.count = product.count + 1;\n        product.total = product.count * product.price\n\n        this.setState(() => {\n            return {\n                cart: [...tempcart]\n            }\n        }, () => {\n            this.handleaddtotal()\n        })\n\n\n    }\n\n    handledecrement = id => {\n      \n        let temcart = [...this.state.cart]\n        const prodcutfind = temcart.find(item => item.id ===id)\n        const prodcutindex = temcart.indexOf(prodcutfind)\n        const product = temcart[prodcutindex]\n        product.count = product.count - 1;\n\n        {product.count === 0 ? this.handleremoveItem(id) : \n            \n            product.total = product.price * product.count\n\n            this.setState( () => {\n                return {\n                    cart : [...temcart]\n                }\n            },() => {\n                this.handleaddtotal()\n            } )\n\n        }\n        \n\n    }\n\n    handleremoveItem = id => {\n        let tempprodut = [...this.state.products];\n        let tempcart = [...this.state.cart];\n\n        tempcart = tempcart.filter(item => item.id !== id)\n\n        const index = tempprodut.indexOf(this.handlegetitem(id))\n\n        let removeitem = tempprodut[index]\n        removeitem.inCart = false;\n        removeitem.price = 0;\n        removeitem.total = 0;\n\n        this.setState(() => {\n            return {\n                cart: [...tempcart],\n                products: [...tempprodut]\n\n            }\n        }, () => {\n            this.handleaddtotal()\n        })\n\n    }\n\n    handleclear = () => {\n      \n        \n        this.setState(() => {\n            return {cart: []}\n        }, () => {\n            this.setProducts();\n            this.handleaddtotal()\n        })\n    }\n\n    handleaddtotal = () => {\n        let total = 0;\n        this.state.cart.map(item => total += item.total)\n        const tax = total * 0.1\n        const parsetex = parseFloat(tax.toFixed(2))\n        const totlaal = total + parsetex\n\n        this.setState({ cartSubTotal: total, cartTax: parsetex, cartTotal: totlaal })\n\n    }\n\n\n    render() {\n        return (\n\n            <ProductContext.Provider value={{\n                ...this.state,\n                handleDetail: this.handleDetail,\n                handleaddTocart: this.handleaddTocart,\n                handleopen : this.handleopenModel,\n                handleclose : this.hadnlecloseModel,\n                increment : this.handleincrement,\n                decrement : this.handledecrement,\n                removeItem : this.handleremoveItem,\n                clear : this.handleclear,\n\n            }}>\n                {this.props.children}\n            </ProductContext.Provider>\n\n        )\n    }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer} \n\n\n"]},"metadata":{},"sourceType":"module"}